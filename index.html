<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>link page</title>

<link href="https://fonts.googleapis.com/css2?family=Hachi+Maru+Pop&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Hachi Maru Pop', sans-serif;
  background: #7894C1;
  color: #333;
  text-align: center;
  margin: 0;
}

/* ===== ヘッダー ===== */
header {
  padding: 14px 10px;
  color: white;
}
header h1 {
  font-size: 18px;
  margin: 0;
}

/* ===== SNS ===== */
.sns-links a {
  display: block;
  margin: 12px auto;
  width: 80%;
  max-width: 300px;
  padding: 12px;
  background: #eef6ff;
  border-radius: 30px;
  text-decoration: none;
  color: #333;
}

/* ===== 共通カード ===== */
.card {
  margin: 18px auto;
  padding: 16px;
  width: 90%;
  max-width: 480px;
  background: #dfeeff;
  border-radius: 20px;
}

/* ===== ボタン ===== */
.main-button {
  font-family: 'Hachi Maru Pop', sans-serif;
  padding: 10px 22px;
  border-radius: 25px;
  border: none;
  background-color: #6c7fd8;
  color: white;
  cursor: pointer;
}
.main-button.copied {
  background-color: #4fc3f7;
  transform: scale(0.95);
}

/* ===== おみくじ ===== */
#omikuji-result {
  margin-top: 10px;
  font-size: 16px;
}

/* ===== 招待コード ===== */
.invite-box {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #f4fbff;
  border-radius: 16px;
  padding: 12px;
  margin-top: 10px;
}
.invite-info {
  text-align: left;
}
.service-name {
  font-size: 13px;
  color: #666;
}
.invite-code {
  font-size: 15px;
  color: #5b5fc7;
}
.copy-message {
  font-size: 11px;
  color: #4caf50;
}

/* ===== コメント ===== */
.comment-item {
  background: #f4fbff;
  border-radius: 14px;
  padding: 10px;
  margin-top: 10px;
  text-align: left;
}
.comment-name {
  font-size: 13px;
  color: #5b5fc7;
  margin-bottom: 4px;
}
</style>
</head>

<body>

<header>
  <h1>こんにちは♪</h1>
</header>

<div class="sns-links">
  <a href="https://twitter.com/oo" target="_blank">Twitter</a>
  <a href="https://misskey.flowers/" target="_blank">Misskey</a>
</div>

<!-- おみくじ -->
<section class="card">
  <button class="main-button" id="omikuji-button">おみくじ</button>
  <div id="omikuji-result"></div>
</section>

<!-- 招待コード -->
<details class="card">
  <summary>ポイ活 招待コード</summary>

  <div class="invite-box">
    <div class="invite-info">
      <div class="service-name">トリマ</div>
      <div class="invite-code">TRIMA123</div>
      <div class="copy-message"></div>
    </div>
    <button class="main-button" onclick="copyText(this)">コピー</button>
  </div>

  <div class="invite-box">
    <div class="invite-info">
      <div class="service-name">レシチャレ</div>
      <div class="invite-code">RESI456</div>
      <div class="copy-message"></div>
    </div>
    <button class="main-button" onclick="copyText(this)">コピー</button>
  </div>

  <div class="invite-box">
    <div class="invite-info">
      <div class="service-name">マクロミル</div>
      <div class="invite-code">MACRO789</div>
    </div>
    <button class="main-button" onclick="copyText(this)">コピー</button>
  </div>

  <div class="invite-box">
    <div class="invite-info">
      <div class="service-name">dジョブ</div>
      <div class="invite-code">https://djob.docomo.ne.jp/invite/XXXXXX</div>
    </div>
    <a href="https://djob.docomo.ne.jp/invite/XXXXXX" target="_blank" class="main-button">開く</a>
  </div>
</details>

<!-- コメント -->
<details class="card">
  <summary>コメント</summary>
  <div id="comment-list"></div>
</details>

<script>
/* おみくじ */
const results=[
{t:"大吉",m:"いい日！",c:"#4caf50",w:0.4},
{t:"中吉",m:"まあまあ",c:"#2196f3",w:0.4},
{t:"凶",m:"慎重に",c:"#f44336",w:0.2}
];
document.getElementById("omikuji-button").onclick=()=>{
let r=Math.random(),s=0;
for(let o of results){
s+=o.w;
if(r<=s){
let el=document.getElementById("omikuji-result");
el.textContent=o.t+" "+o.m;
el.style.color=o.c;
break;
}}}

/* コピー */
function copyText(btn){
const box=btn.parentElement;
const text=box.querySelector(".invite-code").textContent;
navigator.clipboard.writeText(text).then(()=>{
btn.classList.add("copied");
btn.textContent="OK";
setTimeout(()=>{
btn.classList.remove("copied");
btn.textContent="コピー";
},1200);
});
}

/* コメント表示 */
fetch("https://docs.google.com/spreadsheets/d/10ZAAj6s5S3XXE4oGGnhRnWG_LT5rzgRrhwGdD7iEQv4/gviz/tq?tqx=out:csv")
.then(r=>r.text())
.then(t=>{
t.trim().split("\n").slice(1).reverse().forEach(row=>{
const c=row.split(",");
let name=(c[1]||"").replace(/"/g,"").trim()||"匿名";
let text=(c[2]||"").replace(/"/g,"").trim();
if(!text)return;
document.getElementById("comment-list").innerHTML+=
`<div class="comment-item">
  <div class="comment-name">${name}</div>
  <div>${text}</div>
</div>`;
});
});
</script>

</body>
</html>